/******************************************************************************
 *                                                                            *
 *   FreeRTOS sample application for RTD on S32 platforms                     *
 *                                                                            *
 *   Copyright 2021-2022 NXP                                                  *
 *                                                                            *
 ******************************************************************************/

/* Including necessary configuration files. */
#include <ETH_SKKU.h>
#include "device.h"
#include "math.h"
#include "stdlib.h"
#include "Gmac_Ip.h"
#include "string.h"
#include "lwip/mem.h"
#include "lwip/pbuf.h"
#include "lwip/stats.h"
#include "lwip/snmp.h"
#include "lwip/ethip6.h"
#include "lwip/etharp.h"
#include "lwip/tcpip.h"
#include "gmacif.h"
#include "lwipcfg.h"
#include "lwip/sys.h"

#include "Gmac_Ip.h"
#include "Gmac_Ip_Types.h"
#include "netifcfg.h"
#include "FreeRTOS.h"

#include "Siul2_Dio_Ip.h"
#include "Siul2_Port_Ip.h"

#include "Gmac_Ip_Hw_Access.h"
#include "GMAC_PTP_SKKU.h"
#include "HAL_init_SKKU.h"
#include "FlexCAN_SKKU.h"
/*==================================================================================================
*                          LOCAL TYPEDEFS (STRUCTURES, UNIONS, ENUMS)
==================================================================================================*/


/*==================================================================================================
*                                       LOCAL MACROS
==================================================================================================*/

/*==================================================================================================
*                                      LOCAL CONSTANTS
==================================================================================================*/

/*==================================================================================================
*                                      LOCAL VARIABLES
==================================================================================================*/

/*==================================================================================================
*                                      GLOBAL CONSTANTS
==================================================================================================*/

/*==================================================================================================
*                                      GLOBAL VARIABLES
==================================================================================================*/
extern uint8 PTP_Lock;

/*==================================================================================================
*                                   LOCAL FUNCTION PROTOTYPES
==================================================================================================*/


/*==================================================================================================
*                                       LOCAL FUNCTIONS
==================================================================================================*/

/*==================================================================================================
*                                       GLOBAL FUNCTIONS
==================================================================================================*/

/*==================================================================================================
*
==================================================================================================*/

SemaphoreHandle_t Can2Eth_mutex;
xQueueHandle xQueue;
xQueueHandle xQueue_CAN;

int main(void)
{
    GMAC_Type *Base;
    Base = Gmac_apxBases[0];

    device_init();

    Can2Eth_mutex = xSemaphoreCreateMutex();
    xQueue 	   = xQueueCreate(32, sizeof(Gmac_Ip_BufferType));
    xQueue_CAN = xQueueCreate(64, sizeof(Flexcan_Ip_MsgBuffType));
    //start_PTP();
    start_CAN();
    start_TSN();

    vTaskStartScheduler();

    for( ;; )
    {

    };

    return 0;
}



/** @} */

